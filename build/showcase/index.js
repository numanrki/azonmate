(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var n in t)e.o(t,n)&&!e.o(a,n)&&Object.defineProperty(a,n,{enumerable:!0,get:t[n]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.React,t=window.wp.blocks,n=window.wp.i18n,o=window.wp.blockEditor,l=window.wp.components,r=window.wp.serverSideRender;var c=e.n(r);const i=window.wp.element,s=[{value:"grid",label:(0,n.__)("Grid Cards","azonmate"),desc:(0,n.__)("Responsive card grid â€” best for 3-12 products","azonmate"),type:"multi",icon:"â–¦"},{value:"list",label:(0,n.__)("List / Row","azonmate"),desc:(0,n.__)("Horizontal row layout â€” great for 2-6 products","azonmate"),type:"multi",icon:"â˜°"},{value:"masonry",label:(0,n.__)("Masonry / Collage","azonmate"),desc:(0,n.__)("Pinterest-style collage â€” ideal for varied images","azonmate"),type:"multi",icon:"âŠž"},{value:"table",label:(0,n.__)("Comparison Table","azonmate"),desc:(0,n.__)("Side-by-side spec table â€” perfect for comparing","azonmate"),type:"multi",icon:"âŠŸ"},{value:"hero",label:(0,n.__)("Hero Card","azonmate"),desc:(0,n.__)("Large featured card â€” spotlight a single product","azonmate"),type:"single",icon:"â—†"},{value:"compact",label:(0,n.__)("Compact Inline","azonmate"),desc:(0,n.__)("Slim inline card â€” fits inside article text","azonmate"),type:"single",icon:"â–¬"},{value:"split",label:(0,n.__)("Split Layout","azonmate"),desc:(0,n.__)("50/50 image + details panel â€” editorial style","azonmate"),type:"single",icon:"â—§"},{value:"deal",label:(0,n.__)("Deal Card","azonmate"),desc:(0,n.__)("Price-focused card â€” emphasis on savings","azonmate"),type:"single",icon:"ðŸ’°"}],m=wp.element.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("rect",{x:1,y:1,width:22,height:22,rx:4,fill:"#ff9900"}),wp.element.createElement("rect",{x:4,y:4,width:7,height:7,rx:1.5,fill:"#fff"}),wp.element.createElement("rect",{x:13,y:4,width:7,height:7,rx:1.5,fill:"#fff"}),wp.element.createElement("rect",{x:4,y:13,width:7,height:7,rx:1.5,fill:"#fff"}),wp.element.createElement("rect",{x:13,y:13,width:7,height:7,rx:1.5,fill:"#fff"}));(0,t.registerBlockType)("azonmate/showcase",{icon:m,edit:function({attributes:e,setAttributes:t}){const{asins:r,layout:d,columns:_,max:p,heading:u,showBadge:h,showPrice:w,showRating:g,buttonText:z}=e,y=(0,o.useBlockProps)(),[b,E]=(0,i.useState)(""),[v,f]=(0,i.useState)([]),[C,k]=(0,i.useState)(!1),[x,S]=(0,i.useState)(r?r.split(",").map(e=>e.trim()).filter(Boolean):[]),B=()=>{if(!b.trim())return;k(!0);const e=new FormData;e.append("action","azon_mate_search_products"),e.append("nonce",window.azonMateBlock?.nonce||""),e.append("keywords",b),fetch(window.azonMateBlock?.ajaxUrl||"/wp-admin/admin-ajax.php",{method:"POST",body:e}).then(e=>e.json()).then(e=>{k(!1),e.success&&e.data.products&&f(e.data.products)}).catch(()=>k(!1))},N=e=>{if(x.includes(e))return;const a=[...x,e];S(a),t({asins:a.join(",")})};if(!d)return(0,a.createElement)("div",{...y},(0,a.createElement)(l.Placeholder,{icon:m,label:(0,n.__)("AzonMate Showcase","azonmate"),instructions:(0,n.__)("Choose a pre-built layout â€” products will render exactly as designed.","azonmate")},(0,a.createElement)("div",{className:"azonmate-showcase-picker"},s.map(e=>(0,a.createElement)("button",{key:e.value,type:"button",className:"azonmate-showcase-picker__card",onClick:()=>t({layout:e.value})},(0,a.createElement)("span",{className:"azonmate-showcase-picker__icon"},e.icon),(0,a.createElement)("strong",{className:"azonmate-showcase-picker__label"},e.label),(0,a.createElement)("span",{className:"azonmate-showcase-picker__desc"},e.desc),(0,a.createElement)("span",{className:"azonmate-showcase-picker__badge"},"multi"===e.type?(0,n.__)("Multi-product","azonmate"):(0,n.__)("Single-product","azonmate")))))));const P=s.find(e=>e.value===d)||s[0],T="single"===P.type;return r?(0,a.createElement)("div",{...y},(0,a.createElement)(o.InspectorControls,null,(0,a.createElement)(l.PanelBody,{title:(0,n.__)("Showcase Layout","azonmate")},(0,a.createElement)(l.SelectControl,{label:(0,n.__)("Layout","azonmate"),value:d,options:s.map(e=>({label:e.label,value:e.value})),onChange:e=>t({layout:e})}),(0,a.createElement)(l.RangeControl,{label:(0,n.__)("Columns","azonmate"),value:_,onChange:e=>t({columns:e}),min:1,max:6}),(0,a.createElement)(l.RangeControl,{label:(0,n.__)("Max Products","azonmate"),value:p,onChange:e=>t({max:e}),min:1,max:20})),(0,a.createElement)(l.PanelBody,{title:(0,n.__)("Display Options","azonmate"),initialOpen:!1},(0,a.createElement)(l.TextControl,{label:(0,n.__)("Heading","azonmate"),value:u,onChange:e=>t({heading:e})}),(0,a.createElement)(l.ToggleControl,{label:(0,n.__)("Show Badge","azonmate"),checked:h,onChange:e=>t({showBadge:e})}),(0,a.createElement)(l.ToggleControl,{label:(0,n.__)("Show Price","azonmate"),checked:w,onChange:e=>t({showPrice:e})}),(0,a.createElement)(l.ToggleControl,{label:(0,n.__)("Show Rating","azonmate"),checked:g,onChange:e=>t({showRating:e})}),(0,a.createElement)(l.TextControl,{label:(0,n.__)("Button Text","azonmate"),value:z,onChange:e=>t({buttonText:e}),help:(0,n.__)("Leave empty for default.","azonmate")})),(0,a.createElement)(l.PanelBody,{title:(0,n.__)("Products","azonmate"),initialOpen:!1},(0,a.createElement)(l.TextControl,{label:(0,n.__)("ASINs (comma-separated)","azonmate"),value:r,onChange:e=>t({asins:e})}),(0,a.createElement)(l.Button,{variant:"secondary",isSmall:!0,onClick:()=>t({asins:""}),style:{marginBottom:"10px"}},(0,n.__)("Replace Products","azonmate")),(0,a.createElement)(l.Button,{variant:"tertiary",isSmall:!0,onClick:()=>t({layout:"",asins:""})},(0,n.__)("Change Layout","azonmate")))),(0,a.createElement)("div",{className:"azonmate-editor-preview"},(0,a.createElement)("div",{className:"azonmate-editor-preview__toolbar"},(0,a.createElement)("span",{style:{fontWeight:600,color:"#ff9900"}},P.icon," ",P.label),(0,a.createElement)(l.Button,{variant:"tertiary",isSmall:!0,onClick:()=>t({asins:""})},(0,n.__)("Replace","azonmate")),(0,a.createElement)(l.Button,{variant:"tertiary",isSmall:!0,onClick:()=>t({layout:"",asins:""})},(0,n.__)("Change Layout","azonmate"))),(0,a.createElement)(c(),{block:"azonmate/showcase",attributes:e}))):(0,a.createElement)("div",{...y},(0,a.createElement)(l.Placeholder,{icon:m,label:P.label,instructions:T?(0,n.__)("Search and select one product for this layout.","azonmate"):(0,n.__)("Search and add products for this layout.","azonmate")},(0,a.createElement)("div",{className:"azonmate-block-search"},(0,a.createElement)("div",{className:"azonmate-block-search__input-row"},(0,a.createElement)(l.TextControl,{placeholder:(0,n.__)("Search productsâ€¦","azonmate"),value:b,onChange:E,onKeyDown:e=>"Enter"===e.key&&B()}),(0,a.createElement)(l.Button,{variant:"primary",onClick:B,disabled:C},C?(0,a.createElement)(l.Spinner,null):(0,n.__)("Search","azonmate")),(0,a.createElement)(l.Button,{variant:"secondary",onClick:()=>{k(!0);const e=new FormData;e.append("action","azon_mate_get_manual_products"),e.append("nonce",window.azonMateBlock?.nonce||""),e.append("search",b),fetch(window.azonMateBlock?.ajaxUrl||"/wp-admin/admin-ajax.php",{method:"POST",body:e}).then(e=>e.json()).then(e=>{k(!1),e.success&&e.data.products&&f(e.data.products)}).catch(()=>k(!1))},disabled:C},(0,n.__)("My Products","azonmate"))),(0,a.createElement)("div",{className:"azonmate-block-search__input-row"},(0,a.createElement)(l.TextControl,{placeholder:T?(0,n.__)("Or paste ASIN directlyâ€¦","azonmate"):(0,n.__)("Or paste ASINs: B08N5WRWNW, B09V3KXJPB","azonmate"),onChange:e=>{e.trim()&&(T&&/^[A-Z0-9]{10}$/i.test(e.trim())?t({asins:e.trim().toUpperCase()}):T||t({asins:e.trim()}))}})),x.length>0&&!T&&(0,a.createElement)("div",{className:"azonmate-block-search__selected"},(0,a.createElement)("strong",null,(0,n.__)("Selected:","azonmate")),x.map(e=>(0,a.createElement)("span",{key:e,className:"azonmate-block-search__tag"},e,(0,a.createElement)("button",{type:"button",onClick:()=>(e=>{const a=x.filter(a=>a!==e);S(a),t({asins:a.join(",")})})(e)},"Ã—"))),(0,a.createElement)(l.Button,{variant:"primary",isSmall:!0,onClick:()=>t({asins:x.join(",")})},(0,n.__)("Done","azonmate"))),v.length>0&&(0,a.createElement)("div",{className:"azonmate-block-search__results"},v.map(e=>(0,a.createElement)("div",{key:e.asin,className:"azonmate-block-search__result",onClick:()=>T?t({asins:e.asin}):N(e.asin),role:"button",tabIndex:0,onKeyDown:a=>"Enter"===a.key&&(T?t({asins:e.asin}):N(e.asin))},(e.image_medium||e.image_small||e.image)&&(0,a.createElement)("img",{src:e.image_medium||e.image_small||e.image,alt:""}),(0,a.createElement)("span",{className:"azonmate-block-search__result-title"},e.title),(e.price_display||e.price)&&(0,a.createElement)("span",{className:"azonmate-block-search__result-price"},e.price_display||e.price)))),(0,a.createElement)("div",{style:{marginTop:"12px"}},(0,a.createElement)(l.Button,{variant:"tertiary",isSmall:!0,onClick:()=>t({layout:""})},(0,n.__)("â† Change Layout","azonmate"))))))},save:()=>null})})();